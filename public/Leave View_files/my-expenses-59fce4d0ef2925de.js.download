(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8312],{55715:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/[role]/my-details/my-expenses",function(){return l(64666)}])},64666:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return MyExpensesPage}});var a=l(85893),d=l(50675),n=l(91362),i=l(61284),c=l(16631),o=l(90465),t=l(31383),r=l(11163),m=l.n(r),x=l(67294),u=l(51649),p=l(96225);function MyExpensesPage(){var e,s,l;let[h,j]=(0,x.useState)(""),[v,g]=(0,x.useState)(""),[N,f]=(0,x.useState)(0),[w,y]=(0,x.useState)(20),[k,b]=(0,x.useState)(!0),{user:E}=(0,n.Z)(),S=(0,x.useDeferredValue)(null==h?void 0:h.trim()),{role:P}=(0,r.useRouter)().query,A="expense-travels?userId=".concat(null==E?void 0:E.id,"&perPage=").concat(w,"&pageNo=").concat(N,"&isTotalData=true");(null==S?void 0:S.length)>0&&(A+="&search=".concat(S)),v&&(A+="&expensesName=".concat(v));let{data:_,isValidating:D,mutate:C}=(0,i.Z)(A);console.log(null==_?void 0:_.data);let F=[{label:"Download as CSV",icon:(0,a.jsx)(p.F6R,{className:"text-primary"})},{label:"Download as PDF",icon:(0,a.jsx)(p.Bmg,{className:"text-secondary"})}];return(0,a.jsx)(c.lq,{title:"My Expenses",children:(0,a.jsxs)("section",{className:"admin-container flex flex-col admin-gap",children:[(0,a.jsx)(d.cIA,{heading:"My Expenses",pathArr:(0,o.f1y)(P),setIsList:b}),(0,a.jsxs)("div",{className:"admin-bg rounded-md w-full grid grid-cols-12 gap-4",children:[(0,a.jsx)("div",{className:"lg:col-span-4 md:col-span-6 col-span-12",children:(0,a.jsx)(d.f9m,{setSortingValue:g,sortingSchema:[{key:"2",placeHolder:"Select Type Of Expense",name:"sort",type:"select",value:v,initialValue:"",options:[{label:"Ascending",value:"ascending"},{label:"Descending",value:"descending"}]}]})}),(0,a.jsx)("div",{className:"lg:col-span-4 md:col-span-6 col-span-12",children:(0,a.jsx)(d.Nyn,{placeholder:"Search Here...",setSearchAttribute:j,searchAttribute:h})}),(0,a.jsxs)("div",{className:"lg:col-span-4 col-span-12 flex flex-col admin-gap",children:[(0,a.jsxs)("div",{className:"flex justify-end gap-2 items-end",children:[(0,a.jsx)(t.Z,{title:"Add Expense",children:(0,a.jsx)("div",{className:"flex justify-center cursor-pointer items-center text-xl common-transition text-primary w-10 h-10 rounded-md border bg-primary/5",onClick:()=>m().push("/panel/".concat(P,"/employee/add-expense")),children:(0,a.jsx)(u.gyF,{})})}),(0,a.jsx)("div",{children:(0,a.jsx)(d.o6G,{exportArray:F})})]}),(0,a.jsx)("div",{className:"w-full flex items-end justify-end",children:(0,a.jsx)(d.tlE,{currentPage:N,perPage:w,setCurrentPage:f,totalCount:null==_?void 0:_.totalCount,setPerPage:y,lastPage:!(null==_?void 0:_.haveNextPage)})})]})]}),D?k?(0,a.jsx)("div",{className:"flex flex-col gap-4 border items-center justify-center rounded w-full",children:[void 0].map((e,s)=>(0,a.jsx)(MyExpensesListDesignSkeleton,{},s))}):(0,a.jsx)("div",{className:"w-full grid md:grid-cols-2 2xl:grid-cols-4 lg:grid-cols-4 admin-gap",children:[...Array(12)].map((e,s)=>(0,a.jsx)(EmployeeExpenseSkeleton,{},s))}):k?(0,a.jsx)("div",{className:"max-w-full overflow-x-scroll scroll-bar-none",children:(0,a.jsxs)("div",{className:" flex flex-col min-w-[65rem]",children:[(0,a.jsxs)("div",{className:" grid grid-cols-9 text-sm font-semibold px-6 py-4 bg-pink-blue/70 text-white shadow-lg rounded-t-md",children:[(0,a.jsx)("div",{className:"col-span-1",children:"Sl no."}),(0,a.jsx)("div",{className:"col-span-2 ",children:"Title"}),(0,a.jsx)("div",{className:"col-span-2",children:"Description"}),(0,a.jsx)("div",{className:"col-span-1",children:"Amount"}),(0,a.jsx)("div",{className:"col-span-1",children:"Status"}),(0,a.jsx)("div",{className:"col-span-1",children:"Date"}),(0,a.jsx)("div",{className:"col-span-1",children:"Action"})]}),(0,a.jsx)("div",{className:"w-full flex flex-col bg-white shadow-shadow-primary rounded-b-md ",children:null==_?void 0:null===(e=_.data)||void 0===e?void 0:e.map((e,s)=>(0,a.jsx)(d.AF1,{curExpenses:e,index:s,mutate:C},s))})]})}):(0,a.jsx)(a.Fragment,{children:(null==_?void 0:_.data)&&(null==_?void 0:null===(s=_.data)||void 0===s?void 0:s.length)>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 admin-gap",children:null==_?void 0:null===(l=_.data)||void 0===l?void 0:l.map((e,s)=>(0,a.jsx)(d.ZTp,{curExpenses:e,mutate:C},s))}):(0,a.jsx)(d.moz,{title:"No Expense Found"})})]})})}let EmployeeExpenseSkeleton=()=>(0,a.jsx)("section",{children:(0,a.jsx)("div",{className:"w-full admin-card rounded-md  min-h-[16rem]",children:(0,a.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-md skeleton"}),(0,a.jsx)("div",{className:"w-15 h-5 rounded-md skeleton"})]}),(0,a.jsx)("div",{className:"flex justify-start gap-2",children:(0,a.jsx)("div",{className:"w-40 h-7 rounded skeleton"})}),(0,a.jsx)("div",{className:"flex justify-start gap-2",children:(0,a.jsx)("div",{className:"w-full h-12 rounded-md skeleton"})}),(0,a.jsx)("div",{className:"w-32 h-3 rounded skeleton"}),(0,a.jsx)("div",{className:"w-32 h-2 rounded skeleton"}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-36 h-8 rounded-md skeleton"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-md skeleton"}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-md skeleton"})]})]})]})})}),MyExpensesListDesignSkeleton=()=>(0,a.jsxs)("div",{className:"w-full bg-white rounded min-h-[6rem] min-w-[55rem]",children:[(0,a.jsx)("div",{className:"grid grid-cols-7 gap-2 p-6 skeleton rounded font-semibold "}),(0,a.jsx)("div",{children:Array.from({length:15}).map((e,s)=>(0,a.jsxs)("div",{className:"grid grid-cols-9 gap-2 p-5 rounded-t-md font-semibold",children:[(0,a.jsx)("div",{className:"skeleton col-span-1 w-8 rounded h-8"}),(0,a.jsx)("div",{className:"skeleton w-44 col-span-2 rounded h-12"}),(0,a.jsx)("div",{className:"skeleton w-24 col-span-1 rounded h-7"}),(0,a.jsx)("div",{className:"skeleton w-24 col-span-1 rounded h-7"}),(0,a.jsx)("div",{className:"skeleton w-44 col-span-2 rounded h-12"}),(0,a.jsx)("div",{className:"skeleton w-20 col-span-1 rounded h-7"}),(0,a.jsxs)("div",{className:"col-span-1 flex gap-2 ",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-md skeleton"}),(0,a.jsx)("div",{className:"h-10 w-10 rounded-md skeleton"})]})]},s))})]})}},function(e){e.O(0,[4980,3415,7627,8907,4774,1228,2013,1778,5937,5445,260,3874,4617,9570,1827,6158,955,9866,1057,2876,4090,9401,1086,7237,6556,8166,3777,6601,675,6631,9774,2888,179],function(){return e(e.s=55715)}),_N_E=e.O()}]);