(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4556],{89581:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel/[role]/my-details/my-attendance",function(){return l(55674)}])},55674:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return MyAttendancePage}});var s=l(85893),a=l(50675),i=l(91362),n=l(61284),d=l(16631),r=l(90465),c=l(31383),o=l(27484),x=l.n(o),m=l(67294);l(85711);var u=l(63750),h=l(89583),j=l(53990),p=l(51649),v=l(60155),f=l(81511),g=l(5434);function MyAttendancePage(){var e,t;let l=new Date,o=[{icon:(0,s.jsx)(j.$SF,{className:"!w-8 !h-8"}),attendance:"212",title:"Total Report",iconClass:"!from-pink-blue/80 !to-pink-blue/40"},{icon:(0,s.jsx)(u.pJE,{className:"!w-8 !h-8"}),attendance:"42",title:"Full Day",iconClass:"!from-whatsapp/80 !to-whatsapp/40"},{icon:(0,s.jsx)(f.zVA,{className:"!w-8 !h-8"}),attendance:"2",title:"Half Leave",iconClass:"!from-pinterest/80 !to-pinterest/40"},{icon:(0,s.jsx)(g.FHZ,{className:"!w-8 !h-8"}),attendance:"22",title:" Leave",iconClass:"!from-twitter/80 !to-twitter/40"}],N=new Date(new Date().getFullYear(),new Date().getMonth(),1),[w,y]=(0,m.useState)(N),[b,k]=(0,m.useState)(new Date),[A,S]=(0,m.useState)(!1),[D,C]=(0,m.useState)(!1),[E,Z]=(0,m.useState)(),[Y,F]=(0,m.useState)(),[M,P]=(0,m.useState)(),[Q,_]=(0,m.useState)(!1),{user:O}=(0,i.Z)(),{data:R,isValidating:T,mutate:I}=(0,n.Z)("attendance/get-attendance?startDate=".concat(w,"&endDate=").concat(b,"&userId=").concat(null==O?void 0:O.id));console.log(R,"attendance");let{data:J,isValidating:H,mutate:W}=(0,n.Z)("attendance-query-request?userId=".concat(null==O?void 0:O.id));return(0,s.jsx)(d.lq,{title:"Attendance",children:(0,s.jsxs)("section",{className:"admin-container flex flex-col admin-gap",children:[(0,s.jsx)("div",{className:"grid grid-cols-12 gap-4",children:o.map((e,t)=>(0,s.jsxs)("div",{className:"col-span-3 flex flex-col admin-card",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-xl font-medium",children:null==e?void 0:e.attendance}),(0,s.jsx)("div",{className:"text-white bg-gradient-to-r rounded-full p-2 ".concat(null==e?void 0:e.iconClass),children:null==e?void 0:e.icon})]}),(0,s.jsx)("div",{className:"font-medium text-primary-text",children:null==e?void 0:e.title})]},t))}),(0,s.jsxs)("div",{className:"flex flex-col admin-gap",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("h1",{className:"graph-title",children:"Attendance Overview"}),(0,s.jsx)("button",{className:"py-1 px-4 rounded bg-gradient-to-r  text-white font-medium from-pink-blue/90 !to-pink-blue/50",onClick:()=>C(!0),children:"Date Filter"})]}),(0,s.jsxs)("div",{className:"admin-card flex flex-col admin-gap",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-4 admin-gap",children:r.hcK.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col p-3 gap-4 items-center justify-center border rounded-md border-secondary/20",children:[(0,s.jsx)("img",{src:null==e?void 0:e.icon,alt:"",className:"w-16 h-16"}),(0,s.jsx)("div",{className:"text-3xl font-medium text-secondary/80",children:null==e?void 0:e.count}),(0,s.jsx)("div",{className:"font-medium text-sm text-primary-text",children:null==e?void 0:e.title})]},t))}),T?(0,s.jsx)("div",{className:"flex flex-col gap-4 border rounded-t-md w-full",children:[void 0].map((e,t)=>(0,s.jsx)(IndividualEmployeeSkeleton,{},t))}):(0,s.jsx)(s.Fragment,{children:(null==R?void 0:R.data)&&(null==R?void 0:null===(e=R.data)||void 0===e?void 0:e.length)>0?(0,s.jsx)("div",{className:"max-w-full overflow-x-scroll scroll-bar-none",children:(0,s.jsxs)("div",{className:"flex flex-col border rounded-t-md min-w-[55rem] ",children:[(0,s.jsxs)("div",{className:"grid grid-cols-6 gap-2 p-3 text-white bg-pink-blue/70 rounded-t-md font-semibold ",children:[(0,s.jsx)("div",{children:"Date"}),(0,s.jsx)("div",{children:"Punch In"}),(0,s.jsx)("div",{children:"Punch Out"}),(0,s.jsx)("div",{children:"Shift Starts"}),(0,s.jsx)("div",{children:"Shift End"}),(0,s.jsx)("div",{children:"Status"})]}),(0,s.jsx)("div",{className:"flex flex-col",children:null==R?void 0:null===(t=R.data)||void 0===t?void 0:t.map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"grid items-center grid-cols-6 p-3 text-sm ".concat(t%2==0?"":"bg-facebook/5 border-y"),children:[(0,s.jsx)("div",{className:"col-span-1  text-primary-text",children:x()(null==e?void 0:e.date).format("DD/MM/YYYY")}),(null==e?void 0:e.weeklyOff)===!1?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"col-span-1 text-primary-text ",children:(null==e?void 0:e.login)?x()(null==e?void 0:e.login).format("hh:mm A"):(0,s.jsx)("div",{className:"text-primary-text",children:"--:--"})}),(null==e?void 0:e.logout)?(0,s.jsx)("div",{className:"col-span-1 text-primary-text ",children:x()(null==e?void 0:e.logout).format("hh:mm A")}):(0,s.jsx)("div",{className:"text-primary-text",children:"--:--"}),(0,s.jsx)("div",{className:"col-span-1 text-primary-text ",children:x()(null==e?void 0:e.shiftStart).format("hh:mm A")}),(0,s.jsx)("div",{className:"col-span-1 text-primary-text ",children:x()(null==e?void 0:e.shiftEnd).format("hh:mm A")}),(0,s.jsx)("div",{className:"col-span-1  ",children:x()(l).format("DD/MM/YYYY")===x()(null==e?void 0:e.date).format("DD/MM/YYYY")?(0,s.jsx)(s.Fragment,{children:(null==e?void 0:e.attendanceStatus)==="ABSENT"?(0,s.jsx)(c.Z,{title:"Absent",children:(0,s.jsx)("p",{children:(0,s.jsx)(p.QAE,{className:"text-youtube text-2xl"})})}):(0,s.jsx)(s.Fragment,{children:(null==e?void 0:e.halfDay)===!0?(0,s.jsx)(c.Z,{title:"Half day",children:(0,s.jsx)("p",{children:(0,s.jsx)(p.AJ4,{className:"text-yellow-500 text-2xl"})})}):(0,s.jsx)(c.Z,{title:"Present",children:(0,s.jsx)("p",{children:(0,s.jsx)(v.xOC,{className:"text-secondary text-2xl"})})})})}):(null==e?void 0:e.attendanceStatus)==="ABSENT"?(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(c.Z,{title:"Absent",children:(0,s.jsx)("p",{children:(0,s.jsx)(p.QAE,{className:"text-youtube text-2xl"})})}),(null==e?void 0:null===(a=e.attendanceQuery)||void 0===a?void 0:a.length)?"m":(0,s.jsx)(s.Fragment,{children:(null==e?void 0:e.attendanceQueryStatus)==="INITIATED"?(0,s.jsx)(c.Z,{title:"Your Message",children:(0,s.jsx)("p",{onClick:()=>{_(!0),P(e)},className:"bg-gradient-to-r from-blue-500  to-cyan-500 text-white p-1 text-lg cursor-pointer rounded-sm w-fit",children:(0,s.jsx)(v.ib5,{})})}):(null==e?void 0:e.attendanceQueryStatus)==="UNAPPROVED"?(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(c.Z,{title:"Unapproved Your Query",children:(0,s.jsx)("p",{className:"bg-gradient-to-r from-yellow-500  to-orange-400 text-white p-1 text-lg cursor-pointer rounded-sm w-fit disabled:opacity-75",children:(0,s.jsx)(u.Lzi,{})})}),(0,s.jsx)(c.Z,{title:"Your Message",children:(0,s.jsx)("p",{onClick:()=>{_(!0),P(e)},className:"bg-gradient-to-r from-blue-500  to-cyan-500 text-white p-1 text-lg cursor-pointer rounded-sm w-fit",children:(0,s.jsx)(v.ib5,{})})})]}):(0,s.jsx)(c.Z,{title:"Raise Query",children:(0,s.jsx)("p",{className:"bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 text-white p-1 text-lg cursor-pointer rounded-sm w-fit",onClick:()=>{S(!0),F(e)},children:(0,s.jsx)(u.XQ,{})})})})]}):(null==e?void 0:e.attendanceStatus)==="PRESENT"?(0,s.jsx)("div",{className:"flex gap-2 items-center",children:(0,s.jsx)(s.Fragment,{children:(null==e?void 0:e.attendanceQueryMessage)?(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(s.Fragment,{children:(null==e?void 0:e.halfDay)===!0?(0,s.jsx)(c.Z,{title:"Half day",children:(0,s.jsx)("p",{children:(0,s.jsx)(p.AJ4,{className:"text-yellow-500 text-2xl"})})}):(0,s.jsx)(c.Z,{title:"Present",children:(0,s.jsx)("p",{children:(0,s.jsx)(v.xOC,{className:"text-secondary text-2xl"})})})}),(0,s.jsx)(c.Z,{title:"Your Message",children:(0,s.jsx)("p",{onClick:()=>{_(!0),P(e)},className:"bg-gradient-to-r from-fuchsia-500  to-pink-400 text-white p-1 text-lg cursor-pointer rounded-sm w-fit",children:(0,s.jsx)(v.ib5,{})})})]}):(0,s.jsx)(c.Z,{title:"Present",children:(0,s.jsx)("p",{children:(0,s.jsx)(v.xOC,{className:"text-secondary text-2xl"})})})})}):(0,s.jsx)("div",{className:"flex gap-2 items-center",children:(0,s.jsx)(c.Z,{title:"Half day",children:(0,s.jsx)("p",{children:(0,s.jsx)(h.TtB,{className:"text-yellow-500 text-2xl"})})})})})]}):(0,s.jsx)("div",{className:"col-span-4 text-linkedin text-md font-medium items-center justify-center flex",children:"Week Off"})]},t)})})]})}):(0,s.jsx)(a.moz,{title:"No Attendance Found"})})]})]}),(0,s.jsx)(a.QAJ,{maxWidth:"sm",paperProps:{style:{borderRadius:18}},open:A,onClose:()=>S(!1),children:(0,s.jsx)(a.jRx,{setReason:S,data:Y,mutate:I})}),(0,s.jsx)(a.QAJ,{maxWidth:"sm",paperProps:{style:{borderRadius:10}},open:Q,onClose:()=>_(!1),children:(0,s.jsx)(a.ZiR,{setMessageDetail:_,data:M})}),(0,s.jsx)(a.QAJ,{open:D,onClose:()=>C(!1),maxWidth:"sm",children:(0,s.jsx)(a.XU6,{onClose:()=>C(!1),setFilterAttribute:Z,filterAttribute:E})})]})})}let IndividualEmployeeSkeleton=()=>(0,s.jsx)("div",{className:"max-w-full overflow-x-scroll scroll-bar-none",children:(0,s.jsxs)("div",{className:"w-full bg-white min-h-[6rem] min-w-[55rem]",children:[(0,s.jsx)("div",{className:"grid grid-cols-6 gap-2 p-6 skeleton rounded-t-md font-semibold "}),(0,s.jsx)("div",{children:Array.from({length:15}).map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-6 gap-2 p-5 rounded-t-md font-semibold",children:[(0,s.jsx)("div",{className:"skeleton w-16 h-5"}),(0,s.jsx)("div",{className:"skeleton w-16 h-5"}),(0,s.jsx)("div",{className:"skeleton w-16 h-5"}),(0,s.jsx)("div",{className:"skeleton w-16 h-5"}),(0,s.jsx)("div",{className:"skeleton w-16 h-5"}),(0,s.jsx)("div",{className:"skeleton w-16 h-5"})]},t))})]})})},85711:function(){}},function(e){e.O(0,[4980,3415,7627,8907,4774,1228,2013,1778,5937,5445,260,3874,4617,9570,1827,6158,955,9866,1057,2876,4090,9401,1086,7237,6556,8166,3777,3609,6601,675,6631,9774,2888,179],function(){return e(e.s=89581)}),_N_E=e.O()}]);